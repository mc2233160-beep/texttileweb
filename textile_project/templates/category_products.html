<!-- In category_products.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ category.name }} - Products - TextilePro{% endblock %}

{% block content %}
<main class="page-content">
    <div class="container">
        <div class="page-header">
            <h1 style="text-align: center;">{{ category.name }}</h1>
            <p style="text-align: center;">{{ category.description }}</p>
        </div>

        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <div class="card-inner">
                    <div class="card-front">
                        <img src="{% static product.image %}" alt="{{ product.name }}" style="width: 100%; height: 300px; object-fit: cover;">
                    </div>
                    <div class="card-back">
                        <h3>{{ product.name }}</h3>
                        <p>{{ product.description }}</p>
                        {% if product.available_colors.all %}
                        <p><strong>Available Colors:</strong>
                            {% for color in product.available_colors.all %}
                                {{ color.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                        {% endif %}
                        {% if product.available_designs.all %}
                        <p><strong>Available Designs:</strong>
                            {% for design in product.available_designs.all %}
                                {{ design.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</main>
{% endblock %}